---
openwrt_system:
  hostname: "{{ inventory_hostname }}"
  timezone: MSK-3
  zonename: Europe/Moscow
  ttylogin: 1

openwrt_dropbear:
  PasswordAuth: 0
  RootPasswordAuth: 0

openwrt_sing_box_config:
  log:
    level: warn
  route:
    auto_detect_interface: true
  inbounds:
    - type: tun
      interface_name: tun0
      domain_strategy: ipv4_only
      inet4_address: 172.16.250.1/30
      auto_route: false
      strict_route: false
      sniff: true
  outbounds:
    - type: vless
      flow: "{{ (inventory__xray_config.clients | selectattr('email', 'search', inventory_hostname))[0].flow }}"
      uuid: "{{ (inventory__xray_config.clients | selectattr('email', 'search', inventory_hostname))[0].id }}"
      server: "{{ inventory__xray_config.server }}"
      server_port: "{{ inventory__xray_config.port }}"
      tls:
        enabled: true
        server_name: "{{ inventory__xray_config.server_name }}"
        reality:
          enabled: true
          public_key: "{{ inventory__xray_config.public_key }}"
          short_id: "{{ inventory__xray_config.short_id }}"
        utls:
          enabled: true
          fingerprint: chrome

openwrt_wg_server:
  interface: wg0
  listen_port: 51821
  addresses: 10.44.0.1/24
  private_key: !vault |
    $ANSIBLE_VAULT;1.1;AES256
    32393963396535633031386232366430306262363266356436366631326463663064373938353537
    3636653137643064336135386438393837376639316638360a633266386466306438646233366630
    35373263376239353432373362373463633233643635663561616132393963346431663236663564
    3961313563376566620a636235663735383565633765653932313438646331336431303336303962
    35616361383830653565316365356238653762383733613831396635623130336331636662396666
    3463646464346330623565383737333735626238316465623136
  clients:
    - description: spgalaxy
      allowed_ips: 10.44.0.2/32
      public_key: 7MEJZ4P8XYVlhQTcuOXN6oQdeevKXOdHjps/GSUt90o=
      private_key: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        62376563303564366135626439666331653133613530333066366330373761343532616332363561
        3238633665316131363664666433636136343231636330630a653962633637366266623339323937
        39323463636137333230373233386161313032633530666538353834363038373662646435633235
        6435353164316361300a633666363063383233643934393835333034353831323933646364663762
        62663939653061306462323033643837303538363637346239323066613864663836353139666363
        3735643762393332633364383139626162353862653039646630
    - description: iphone
      allowed_ips: 10.44.0.3/32
      public_key: dNpZeVI8rA0rHaZuW9IKtGVmyRPXM7viiSVzIVm1qCQ=
    - description: spmacbook
      allowed_ips: 10.44.0.5/32
      public_key: okOdos3cbuHz3P2TF420HQqR+wDA0HpBOMIQVoXNti4=
      private_key: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        39366136626131386439323438306133376439366364353230393831666534323830636534613834
        3437326431326633363332353762393434303335303565640a333032343038333164373066353435
        34333261613231313734343536313437303939393466613561353230616539303637636164303763
        6337613239623632350a316165396138353765343131306161386632353835316236633231623131
        65356630383064623663313930343233393737393633663639366138643932646361383039346636
        3337643538323637633366313436636435326238306338626465
    - description: spipad
      allowed_ips: 10.44.0.6/32
      public_key: Z9hzkmp0VQK8JbmB1AdAfkfojnkkTVK4FP/NGHkcb00=
      private_key: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        35613137623634636334313538336438636466383365646530653338386434613839623063333638
        6433376539646162643231643733646635343933376564390a333334616266663361373633326561
        37316134396539636464306435306231363933666334616136323831633132633133306432666636
        6430613561343436310a633935386463663261663039333665333165396663653562363930626132
        31343935333763346364336236353236313135353566353230356331666633336131383434383130
        3965313639616164313332326239666531666139326336323532
